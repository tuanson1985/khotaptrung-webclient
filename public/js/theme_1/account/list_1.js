$(document).ready((function(){let t=$("#rechargeModal"),a=t.find("#modal-form-charge");function e(){$.ajax({type:"GET",url:"/ajax/reload-captcha",success:function(t){$(".captcha_1 span").html(t.captcha)}})}t.length&&$.ajax({url:"/ajax/get-tele-card",type:"GET",success:function(a){if(1===a.status){let e=a.data,n="";e.length?e.forEach((function(t){n+=`<option value="${t.key}">${t.title}</option>`})):n+='<option value="">-- Vui lòng chọn nhà mạng --</option>',t.find("#modal-telecom").html(n)}$("#modal-telecom").trigger("change")},error:function(t){swal({title:"Lỗi !",text:"Có lỗi phát sinh vui lòng liên hệ QTV để kịp thời xử lý.",icon:"error",buttons:{cancel:"Đóng"}})}}),$(document).on("change","#modal-telecom",(function(){var t,a;t=$(this).val(),a="/ajax/get-amount-tele-card",$.ajax({type:"GET",url:a,data:{telecom:t},success:function(t){if(1===t.status){let a=t.data,n="";a.length?a.forEach((function(t,a){var e;n+=`<label class="card-item">\n                                        <input type="radio" name="amount" data-ratito="${t.ratio_true_amount}" value="${t.amount}" id="card-${a}" hidden ${a?"":"checked"}>\n                                        <label class="card-label" for="card-${a}"><span>${e=t.amount,e.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1.")} đ</span></label>\n                                     </label>`})):n+='<span class="text-invalid">Chưa cấu hình mệnh giá thẻ</span>',$("#modal-amounts").html(n),e()}},error:function(t){swal({title:"Lỗi !",text:"Có lỗi phát sinh vui lòng liên hệ QTV để kịp thời xử lý.",icon:"error",buttons:{cancel:"Đóng"}})},complete:function(t){}})})),$("body").on("click","#modal-reload-captcha",(function(){$(".refresh-captcha img").toggleClass("down"),$.ajax({type:"GET",url:"/reload-captcha2",success:function(t){$(".captcha_1 span").html(t)}})})),a.on("submit",(function(t){t.preventDefault(),$.ajax({type:"POST",url:a.attr("action"),cache:!1,data:a.serialize(),beforeSend:function(t){a.closest(".tab-content").toggleClass("load-overlay",!0).prepend('<div class="wrap-spin"><div class="loading"><div class="loading-child"></div></div></div>')},success:function(t){1===t.status&&($("#successChargeModal").modal("show"),$("#success_charge").html(t.message),a.find(".message-form").empty()),401===t.status&&(window.location.href="/login?return_url="+window.location.href),0===t.status&&a.find(".message-form").text(t.message),a.closest(".tab-content").toggleClass("load-overlay",!1),a.closest(".tab-content").find(".wrap-spin").remove(),e()},error:function(t){swal({title:"Có lỗi xảy ra !",text:"Có lỗi phát sinh vui lòng liên hệ QTV để kịp thời xử lý.",icon:"error",buttons:{cancel:"Đóng"}})},complete:function(t){a.closest(".tab-content").toggleClass("load-overlay",!1),a.closest(".tab-content").find(".wrap-spin").remove()}})}))})),$(document).ready((function(){function t(t){request=$.ajax({type:"GET",url:"/transfer/data",data:{page:t},beforeSend:function(t){},success:t=>{if(1==t.status)$(".recharge_atm_data").empty().html(""),$(".recharge_atm_data").empty().html(t.data);else if(0==t.status){var a="";a+='<div class="table-responsive" id="tableacchstory">',a+='<table class="table table-hover table-custom-res">',a+="<thead><tr> <th>Thời gian</th><th>Số tiền</th><th>Thực nhận</th><th>Trạng thái</th></tr></thead>",a+="<tbody>",a+='<tr><td colspan="8"><span style="color: red;font-size: 16px;">'+t.message+"</span></td></tr>",a+="</tbody>",a+="</table>",a+="</div>",$(".recharge_atm_data").empty().html(""),$(".recharge_atm_data").empty().html(a)}},error:function(t){},complete:function(t){}})}$.ajax({type:"GET",url:"/ajax/transfer-code",success:function(t){if(1==t.status){let a="";a+='<p class="text-danger">'+t.data+'</p>  <span style="padding-left: 8px;cursor: pointer"><i class="fas fa-copy"  data-id="'+t.data+'"></i></span>',$(".transfer-code").html(a)}},error:function(t){swal({title:"Lỗi !",text:"Có lỗi phát sinh vui lòng liên hệ QTV để kịp thời xử lý.",icon:"error",buttons:{cancel:"Đóng"}})},complete:function(t){}}),t(),$(document).on("click",".paginate__v1__nt .pagination a",(function(a){a.preventDefault();var e=$(this).attr("href").split("page=")[1];$("#hidden_page_atm").val(e),$("li").removeClass("active"),$(this).parent().addClass("active"),t(e)}))}));
