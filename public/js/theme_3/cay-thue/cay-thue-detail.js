let input_currency=$("input[currency]");function convertToSlug(e){return("@"+e.toLowerCase().replace(/á|à|ả|ạ|ã|ă|ắ|ằ|ẳ|ẵ|ặ|â|ấ|ầ|ẩ|ẫ|ậ/gi,"a").replace(/é|è|ẻ|ẽ|ẹ|ê|ế|ề|ể|ễ|ệ/gi,"e").replace(/i|í|ì|ỉ|ĩ|ị/gi,"i").replace(/ó|ò|ỏ|õ|ọ|ô|ố|ồ|ổ|ỗ|ộ|ơ|ớ|ờ|ở|ỡ|ợ/gi,"o").replace(/ú|ù|ủ|ũ|ụ|ư|ứ|ừ|ử|ữ|ự/gi,"u").replace(/ý|ỳ|ỷ|ỹ|ỵ/gi,"y").replace(/đ/gi,"d").replace(/\`|\~|\!|\@|\#|\||\$|\%|\^|\&|\*|\(|\)|\+|\=|\,|\.|\/|\?|\<|\'|\"|\:|\;|_/gi,"").replace(/ /gi,"-").replace(/\-\-\-\-\-/gi,"-").replace(/\-\-\-\-/gi,"-").replace(/\-\-\-/gi,"-").replace(/\-\-/gi,"-")+"@").replace(/\@\-|\-\@|\@/gi,"")}input_currency.on("input",(function(e){let t=this.value;t=t.replace(/\./g,"");let a=t.toString().split("").reverse().join("").replace(/(?=\d*\.?)(\d{3})/g,"$1.");a=a.split("").reverse().join("").replace(/^[\.]/,""),this.value=a})),$(".service-form").on("submit",(function(e){e.preventDefault();let t=convertToSlug($(this).find('[name="search"]').val()),a=!0,r=$("#text-empty");r.hide(),$(".js-service").each((function(e,r){let n=$(r).find("img").attr("alt");n=convertToSlug(n),$(this).toggle(n.indexOf(t)>-1),n.indexOf(t)>-1&&(a=!1)})),a&&r.show()})),$("input[numberic]").on("keypress",(function(e){var t=e.which?e.which:e.keyCode;return!(46!=t&&t>31&&(t<48||t>57))}));let data_params,purchase_name,input_params_hide=$("#data_params"),input_pack=$("#input_pack"),txt_price=$("#txt-price"),server=-1;if(server=parseInt($("select[name=server] option").filter(":selected").val()),input_params_hide.length)switch(data_params=JSON.parse(input_params_hide.val()),purchase_name=7==data_params.filter_type?data_params.filter_name:"VNĐ",data_params.filter_type){case"3":break;case"4":$("select[name=selected]").change((function(t,a){itemselect=e=parseInt($("select[name=selected] option").filter(":selected").val()),UpdatePrice4()})),$("select[name=server]").change((function(e,t){server=parseInt($("select[name=server] option").filter(":selected").val()),UpdatePrice4()}));let e=parseInt($("select[name=selected] option").filter(":selected").val()),t=$("select[name=selected] option").filter(":selected").text();function UpdatePrice4(){let a=0;if(-1!=e){if(1==data_params.server_mode&&1==data_params.server_price){let t=data_params["price"+server];a=parseInt(t[e])}else{let t=data_params.price;a=parseInt(t[e])}a=a.toString().split("").reverse().join("").replace(/(?=\d*\.?)(\d{3})/g,"$1."),a=a.split("").reverse().join("").replace(/^[\.]/,""),txt_price.text(a+" VNĐ"),$(".service_pack").html(`<small>${t}</small>`),$(".total--price").text(`${a} VNĐ`)}}UpdatePrice4();break;case"5":function UpdatePrice5(){let e=$('#select-multi input[type="checkbox"]:checked');var t=0,a="";if(1==data_params.server_mode&&1==data_params.server_price)var r=data_params["price"+server];else r=data_params.price;e.length>0&&(e.each((function(e,n){t+=parseInt(r[$(n).val()]),a&&(a+="|"),a+=$(this).val()})),$("input[name=selected]").val(a)),t=(t=t.toString().split("").reverse().join("").replace(/(?=\d*\.?)(\d{3})/g,"$1.")).split("").reverse().join("").replace(/^[\.]/,""),txt_price.text(t+" VNĐ"),$(".total--price").text(t+" VNĐ")}function checkPack(){let e=$('#select-multi input[type="checkbox"]:checked');e.length&&($(".service_pack").html(""),e.each((function(e){let t="";t+="<small>",t+=`${$(this).parent().find(".label--checkbox__name").text().trim()}`,t+="</small>",$(".service_pack").append(t)})))}$('#select-multi input[type="checkbox"]').change((function(){UpdatePrice5(),checkPack()}));break;case"6":function UpdatePrice6(e){let t=1*$("select[name=rank_from]").val(),a=1*$("select[name=rank_to]").val(),r=$("select[name=rank_from] option").filter(":selected").text(),n=$("select[name=rank_to] option").filter(":selected").text(),s=data_params.price,i=0;if(t<a)for(var l=parseInt(t)+1;l<=a;l++)i+=parseInt(s[l]-s[l-1]);else if(0==e){$(".data-select-rank-end ul li[data-value="+a+"]").removeClass("selected"),a=t+1;for(l=parseInt(t)+1;l<=a;l++)i+=parseInt(s[l]-s[l-1]);$("select[name=rank_to]").val(a),$(".data-select-rank-end ul li[data-value="+a+"]").addClass("selected"),n=$(".data-select-rank-end ul li[data-value="+a+"]").text(),$(".data-select-rank-end .current").html(""),$(".data-select-rank-end .current").html(n)}else{$(".data-select-rank-start ul li[data-value="+t+"]").removeClass("selected"),t=a-1;for(l=parseInt(t)+1;l<=a;l++)i+=parseInt(s[l]-s[l-1]);$("select[name=rank_from]").val(t),$(".data-select-rank-start ul li[data-value="+t+"]").addClass("selected"),r=$(".data-select-rank-start ul li[data-value="+t+"]").text(),$(".data-select-rank-start .current").html(""),$(".data-select-rank-start .current").html(r)}i=i.toString().split("").reverse().join("").replace(/(?=\d*\.?)(\d{3})/g,"$1."),i=i.split("").reverse().join("").replace(/^[\.]/,""),txt_price.html(i+" VNĐ"),$(".service_pack").html(`<small>${r} - ${n}</small>`),$(".total--price").text(`${i} VNĐ`)}$(".js-selected").on("change",(function(){UpdatePrice6($(this).data("type"))})),UpdatePrice6();break;case"7":function UpdateTotal(){var e=parseInt(input_pack.val().replace(/\./g,""));if("number"!=typeof e||e<data_params.input_pack_min||e>data_params.input_pack_max)return void txt_price.text("Tiền nhập không đúng");var t=0,a=0;let r=server,n=e.toString().split("").reverse().join("").replace(/(?=\d*\.?)(\d{3})/g,"$1.");if(n=n.split("").reverse().join("").replace(/^[\.]/,""),e){if(1==data_params.server_mode&&1==data_params.server_price)for(var s=data_params["price"+r],i=data_params["discount"+r],l=0;l<s.length;l++)e>=s[l]&&null!=s[l]&&(s[l],l,a=i[l],t=e*i[l]);else{s=data_params.price;a=(i=data_params.discount)[0];for(let t=0;t<s.length;t++)t&&e>=s[t]&&(a=i[t]);t=e*a}t=parseInt(t/1e3*data_params.input_pack_rate),$("#txt-discount").val(a),t=(t=t.toString().split("").reverse().join("").replace(/(?=\d*\.?)(\d{3})/g,"$1.")).split("").reverse().join("").replace(/^[\.]/,""),txt_price.html(""),txt_price.text(t+" "+purchase_name),$(".service_pack").html(`<small>${t} ${purchase_name}</small>`),$(".total--price").text(`${n} VNĐ`)}else txt_price.text("Tiền nhập không đúng"),$(".service_pack").html("<small>Tiền nhập không đúng</small>"),$(".total--price").text(`${n} VNĐ`)}input_pack.bind("focus keyup",(function(){UpdateTotal()})),$("select[name=server]").on("change",(function(){UpdateTotal()})),UpdateTotal()}function checkboxRequired(e){return!$(`${e}:checked`).length}$(".submit-form").on("click",(function(){let e=1*$("#surplus").val(),t=Array.from($(".total--price")),a=$(document).width()>992?t[0]:t[1];if(e<1*$(a).text().match(/\d/g).join(""))return $("#openOrder").modal("hide"),void $("#rechargeModal").modal("show");let r=$("#formDataService").serializeArray().reduce((function(e,t){return e[t.name]=t.value,e}),{}),n=$("#formDataService").attr("action");r.selected&&(r.selected=r.selected.replace(/\./g,"")),$(this).html("Đang xử lý..."),$.ajax({type:"POST",url:n,data:r,success:function(e){e.status?($(".js-message-res span").text(e.message),$(document).width()>1200?$(".openSuccess").trigger("click"):$(".button-next-step-two").trigger("click")):$(".modal__error__message small").text(e.message)},complete:function(){$(".submit-form").html("Xác nhận")}})}));let table_bot=$("#table-bot");function Validator(e){function t(e,t){for(;e.parentElement;){if(e.parentElement.matches(t))return e.parentElement;e=e.parentElement}}let a={};function r(r,s){let i,l=t(r,e.formGroupSelector).querySelector(e.errorSelector),c=a[s.selector];for(let e=0;e<c.length;++e){switch(r.type){case"radio":case"checkbox":i=c[e](n.querySelector(s.selector+":checked"));break;default:i=c[e](r.value)}if(i)break}return i?(l.innerText=i,t(r,e.formGroupSelector).classList.add("invalid")):(l.innerText="",t(r,e.formGroupSelector).classList.remove("invalid")),!i}let n=document.querySelector(e.form);n&&(n.onsubmit=function(t){t.preventDefault();let a=!0;if(e.rules.forEach((function(e){r(n.querySelector(e.selector),e)||(a=!1)})),a&&"function"==typeof e.onSubmit){let t=n.querySelectorAll("[name]:not([disabled])"),a=Array.from(t).reduce((function(e,t){switch(e[t.name]=t.value,t.type){case"radio":e[t.name]=n.querySelector('input[name"'+t.name+'"]:checked').value;break;case"checkbox":if(!t.matches(":checked"))return e[t.name]="",e;Array.isArray(e[t.name])||(e[t.name]=[]),e[t.name].push(t.value);break;case"file":e[t.name]=t.files;break;default:e[t.name]=t.value}return e}),{});e.onSubmit(a)}},e.rules.forEach((function(s){Array.isArray(a[s.selector])?a[s.selector].push(s.test):a[s.selector]=[s.test];let i=n.querySelectorAll(s.selector);Array.from(i).forEach((function(a){a.onblur=function(){r(a,s)},a.oninput=function(){t(a,e.formGroupSelector).querySelector(".form-message").innerText="",t(a,e.formGroupSelector).classList.remove("invalid")}}))})))}table_bot.length&&$.ajax({type:"GET",url:"/show-bot",data:{slug:$("#slug").val()},success:e=>{e.status&&(table_bot.html(""),table_bot.html(e.data))}}),Validator.isRequired=function(e,t){return{selector:e,test:function(e){return e?void 0:t||"Vui lòng nhập trường này"}}},Validator.isEmail=function(e,t){return{selector:e,test:function(e){return/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e)?void 0:t||"Trường này phải là email"}}},Validator.minLength=function(e,t,a){return{selector:e,test:function(e){return e.length>=t?void 0:a||`Nhập tối thiểu ${t} kí tự`}}},Validator.maxLength=function(e,t,a){return{selector:e,test:function(e){return e.length<=t?void 0:a||`Nhập tối đa ${t} kí tự`}}},Validator.isConfirm=function(e,t,a){return{selector:e,test:function(e){return e===t()?void 0:a||"Giá trị nhập vào không chính xác"}}},$(document).ready((function(e){var t,a,r,n,s,i;new Swiper(".list-nap-game",{autoplay:!1,navigation:{nextEl:".swiper-nap-game .swiper-button-next",prevEl:".swiper-nap-game .swiper-button-prev"},updateOnImagesReady:!0,watchSlidesVisibility:!1,lazyLoadingInPrevNext:!1,lazyLoadingOnTransitionStart:!1,loop:!1,centeredSlides:!1,slidesPerView:4.5,slidesPerGroup:3,speed:800,spaceBetween:16,touchMove:!0,freeMode:!0,freeModeSticky:!0,grabCursor:!0,observer:!0,observeParents:!0,breakpoints:{992:{slidesPerView:3.2},768:{slidesPerView:3.2},480:{slidesPerView:1.5}}});$(".show-btn-password").on("click",(function(){let e=$("#password");"password"===e.attr("type")?(e.attr("type","text"),$(this).find("img").attr("src","/assets/frontend/theme_3/image/images_1/eye-hide.svg")):(e.attr("type","password"),$(this).find("img").attr("src","/assets/frontend/theme_3/image/images_1/eye-show.svg"))})),$(".show-btn-password-mobile").on("click",(function(){var e=$("#password-mobile");if("password"==e.attr("type")){e.attr("type","text");var t="";t+='<img class="lazy" src="/assets/theme_3/image/cay-thue/eyeshow.png" alt="">',$(".show-btn-password-mobile").html(""),$(".show-btn-password-mobile").html(t),$(this).val("Hide")}else{t="";t+='<img class="lazy" src="/assets/theme_3/image/cay-thue/eyehide.png" alt="">',$(".show-btn-password-mobile").html(""),$(".show-btn-password-mobile").html(t),e.attr("type","password"),$(this).val("Show")}})),$(".openSuccess").on("click",(function(){$("#successModal").modal("show")})),$(".wide").niceSelect(),tippy(".checkbox-info-ct",{placement:"top",arrow:!0,animation:"fade",theme:"light"}),tippy(".option-info-ct",{placement:"top",arrow:!0,animation:"fade",theme:"light",content:"Đã copy!"}),$("body").on("click",".button-next-step-one",(function(){if(i)return!1;i=!0,t=$("#fieldset-one"),(a=$("#fieldset-two")).show(),t.animate({opacity:0},{step:function(e,t){n=50*e+"%",s=1-e,a.css({left:n,opacity:s})},complete:function(){t.hide(),i=!1},easing:"easeInOutBack"})})),$("body").on("click",".previous-step-one",(function(){if(i)return!1;i=!0,t=$("#fieldset-two"),(r=$("#fieldset-one")).show(),t.animate({opacity:0},{step:function(e,a){.8+.2*(1-e),n=50*(1-e)+"%",s=1-e,t.css({left:n}),r.css({opacity:s})},complete:function(){t.hide(),i=!1},easing:"easeInOutBack"})})),$("body").on("click",".button-next-step-two",(function(){if(i)return!1;i=!0,t=$("#fieldset-two"),(r=$("#fieldset-one")).show(),t.animate({opacity:0},{step:function(e,a){.8+.2*(1-e),n=50*(1-e)+"%",s=1-e,t.css({left:n}),r.css({opacity:s})},complete:function(){t.hide(),i=!1},easing:"easeInOutBack"}),$("#successModal").modal("show")})),$("body").on("click",".close-modal-default",(function(e){e.preventDefault(),$("#successModal").modal("hide"),$("#openOrder").modal("hide")})),$("body").on("click",".btn-data",(function(){let e=1,t="",a=$("#formDataService input[required]");a.length&&a.each((function(){if($(this).toggleClass("invalid",!$(this).val().trim()),$(this).val().trim())$(this).parent().next().text("");else{e=0;let a=$(this).parent().prev().text().trim().toLowerCase();t=`<div class="row marginauto order-errors"><div class="col-md-12 left-right default-span"><small>Bạn chưa nhập ${a}</small></div></div>`,$(this).parent().next().html(t)}})),$(".allgame[type=checkbox]").length&&(checkboxRequired("input.allgame[type=checkbox]")?(t='<div class="row marginauto order-errors"><div class="col-md-12 left-right default-span"><small>Phải chọn ít nhất một gói dịch vụ</small></div></div>',e=0,$("#error-mes-checkbox").html(t)):$("#error-mes-checkbox").html(""));let r=$(".confirm-rules");r.length&&(r.is(":checked")?r.parent().next().html(""):(t='<div class="row marginauto order-errors"><div class="col-md-12 left-right default-span"><small>Vui lòng xác nhận thông tin trên</small></div></div>',e=0,r.parent().next().html(t))),e&&($(document).width()>1200?$("#openOrder").modal("show"):$(".button-next-step-one").trigger("click"))})),$("body").on("click",".openSuccess",(function(e){$("#openOrder").modal("hide"),$("#successModal").modal("show")}))}));
